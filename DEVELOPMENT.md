# Mand Mobile è´¡çŒ®è€…è¯´æ˜

[TOC]

## å¼€å‘å‡†å¤‡

å¼€å‘è€…éœ€è¦[Nodejs](https://nodejs.org/en/) 12+ å’Œ[yarn](https://yarnpkg.com/en/docs/install)

å…‹éš†æœ¬ä»“åº“åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ 

```sh
$ npm run bootstrap
```

### æäº¤ä»£ç 

æäº¤ä»£ç éœ€è¦éµå®ˆ`commit æäº¤è§„èŒƒ`ç”¨äºè‡ªåŠ¨ç”Ÿæˆchangelogã€‚å¦‚æœå¯¹æäº¤è§„èŒƒä¸å¤Ÿç†Ÿæ‚‰ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨`npm run cz`æ›¿ä»£`git commit `, æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªäº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·`commitizen`ååŠ©ä½ ç”Ÿæˆè§„èŒƒçš„`commit message`

### é€šç”¨NPM scriptsä»‹ç»

```sh
# å¯åŠ¨å·¥ç¨‹, å®‰è£…ä¾èµ–
$ npm run bootstrap

# è°ƒè¯•å·¥ç¨‹ï¼Œ å¯åœ¨æœ€åè¾“å…¥ç»„ä»¶åç§°ç”¨äºè°ƒè¯•å•ä¸ªç»„ä»¶
$ npm run serve <button-name>

# å‘å¸ƒé¢„å‘(éç¨³å®š)åŒ…
$ npm run pub:prerelease

# å‘å¸ƒæ­£å¼åŒ…
$ npm run pub


# æµ‹è¯•ç»„ä»¶,å¯åœ¨æœ€åè¾“å…¥ç»„ä»¶åç§°ç”¨äºè°ƒè¯•å•ä¸ªç»„ä»¶
$ npm run test:components <button-name>

# å‡çº§å¯¹åº”æµ‹è¯•ç”¨ä¾‹çš„snapshot, ä»¥buttonä¸ºä¾‹
$ cd packages/components && npx jest --updateSnapshot src/button/test/demo.spec.js
```

:tipping_hand_man:é»˜è®¤åœ¨`packages/examples/dist/development/mp-weixin`ç›®å½•ä¸‹è¿›è¡Œuniç»„ä»¶çš„è°ƒè¯•å’Œé¢„è§ˆ

## é¡¹ç›®ç»“æ„

- `packages`: Mand Mobile V3.0é‡‡ç”¨åŸºäºlerna çš„å¤šåŒ…ç®¡ç†æ–¹æ¡ˆï¼Œæ­¤ç›®å½•ä¸‹ç”¨äºå­˜æ”¾æ‰€æœ‰å·¥ç¨‹æºç ï¼ŒåŒ…æ‹¬ç»„ä»¶æºç ã€å¹³å°æºç ã€å·¥ç¨‹åŒ–è„šæœ¬å’Œé€šç”¨å·¥å…·ç±»å’Œæ ·å¼
  - `mand-mobile`: æœ€ç»ˆäº¤ä»˜ç»™åº”ç”¨å¼€å‘è€…çš„ä¸»åŒ…ï¼Œæ­¤ç›®å½•ä¸åŒ…æ‹¬ä»»ä½•æºä»£ç ï¼Œä»…ç”¨äºç”Ÿæˆå¹¶å‘å¸ƒåº”ç”¨å¼€å‘è€…æ‰€éœ€è¦çš„æ„å»ºäº§ç‰©
  - `components`: ç»„ä»¶æºä»£ç 
    - `src`:
      - `[componnent-name]`: å³ç»„ä»¶å·¥ç¨‹ç›®å½•ï¼Œéœ€è¦ä»¥`-`åˆ†å‰²ç›®å½•åç§°ï¼Œç›®å½•åä¸å…è®¸å‡ºç°å¤§å†™å­—æ¯
        - `component.json`: ç»„ä»¶å…ƒä¿¡æ¯ï¼Œç”¨äºè®°å½•å¼€å‘è€…ï¼Œç»„ä»¶åç§°ç­‰ç›¸å…³ä¿¡æ¯
        - `index.vue`: ç»„ä»¶æºç 
        - `demos`: ç»„ä»¶çš„ç¤ºä¾‹ä»£ç 
          - `cases`: å­˜æ”¾ç»„ä»¶ç¤ºä¾‹, æ­¤ç›®å½•ä¸‹æ¯ä¸ªæ–‡ä»¶ç»„è¦éµå¾ªå‘½åè§„èŒƒ`index[No.].vue`
            - index0.vue
            - index1.vue
            - ....
  - `platform`: å¹³å°ç›¸å…³ä»£ç 
    - `lib`: ç”¨äºå­˜æ”¾æ‰€æœ‰å¹³å°ç›¸å…³çš„èµ„æºã€æ¨¡æ¿å’Œé©±åŠ¨å‘½ä»¤
      - `web`: ç”¨äºå­˜æ”¾webç›¸å…³çš„apiã€å¹³å°ç±»åº“ã€æ„å»ºæ¨¡æ¿ã€æ„å»ºå‘½ä»¤
        - `builder`: ç”¨äºå­˜æ”¾æ„å»ºæœŸæ‰€éœ€è¦çš„æ¨¡æ¿å’Œå‘½ä»¤
          - `generator`
            - `index.js`: æ¸²æŸ“æ¨¡æ¿é€»è¾‘å…¥å£
            - `templates`:æ¨¡æ¿ç›®å½•ï¼Œå­˜æ”¾æ„å»ºæ—¶æ‰€éœ€è¦çš„ejsæ¨¡æ¿
          - `command`
            - `build.js`: æ„å»ºæ‰“åŒ…é€»è¾‘
            - `serve.js`: å¼€å‘é¢„è§ˆå‘½ä»¤
        - `runtime`: å­˜æ”¾å’Œå¹³å°ç›¸å…³çš„è¿è¡Œæ—¶ä»£ç 
          - components
          - 
      -  `uni`: ç”¨äºå­˜æ”¾uniæ„å»ºå¾®ä¿¡å°ç¨‹åºæ‰€éœ€è¦çš„apiã€å¹³å°ç±»åº“ã€æ„å»ºæ¨¡æ¿ã€æ„å»ºå‘½ä»¤
        - ...åŒweb
  - `shared`: æä¾›é€šç”¨çš„æ ·å¼ã€mixinã€js utilså’Œç›¸å…³é™æ€èµ„æº
    - `mixin`: é€šç”¨çš„å…¨å±€stylus mixins
    - `style`: é€šç”¨æ ·å¼
    - `util`:ç»„ä»¶è¿è¡Œæ—¶æ‰€éœ€è¦çš„å·¥å…·ä»£ç 
  - `scroller`:  ç»„ä»¶åº“å†…ç½®çš„scrollerä¾èµ–ï¼Œæä¾›é«˜æ€§èƒ½çš„æ»šåŠ¨æ•ˆæœ
  - `vue-cli-plugin-builder`
    - `generator`: å·¥ç¨‹ç±»çš„æ¨¡æ¿ä»£ç å’Œé©±åŠ¨é€»è¾‘ï¼Œç”¨äºè¢«`vue invoke`å‘½ä»¤é©±åŠ¨ç¼–è¯‘æ¨¡æ¿
    - `src`: cli-pluginçš„ä¸»å·¥ç¨‹ï¼Œç”¨äºè¢«`vue-cli-service`é©±åŠ¨, æ‰§è¡Œç›¸åº”å‘½ä»¤

## BEM ä¹¦å†™è§„èŒƒ

`mand-mobile-next` é‡‡ç”¨ `BEM` çš„ `CSS` å‘½åçº¦å®šã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ`HTML` æ ‡ç­¾éƒ½è¦æœ‰è‡ªå·±çš„ç±»åã€‚
- `BEM` ä»£è¡¨ **å—ï¼ˆblockï¼‰ï¼Œå…ƒç´ ï¼ˆelementï¼‰ï¼Œä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰**ã€‚  
- æ‹“å±•å…³ç³»
  - `-` ä¸­åˆ’çº¿ï¼Œåšè¿å­—ç¬¦ä½¿ç”¨ï¼Œæ— å®é™…æ„ä¹‰ã€‚
  - `_` å•ä¸‹æ»‘çº¿ï¼Œç”¨æ¥è¿æ¥å—å’Œå…¶å­å…ƒç´ ã€‚
  - `--` åŒä¸­åˆ’çº¿ç”¨æ¥æè¿°å—æˆ–å—çš„å­å…ƒç´ çš„ä¸€ç§çŠ¶æ€
> å¦‚ï¼š`md-button_content--active`

### å—ï¼ˆblockï¼‰

ä¸€ä¸ªå—æ˜¯è®¾è®¡æˆ–å¸ƒå±€çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæœ‰å…·ä½“ä¸”å”¯ä¸€åœ°æ„ä¹‰ ï¼Œè¦ä¹ˆæ˜¯è¯­ä¹‰ä¸Šçš„è¦ä¹ˆæ˜¯è§†è§‰ä¸Šçš„ã€‚

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»»ä½•ç‹¬ç«‹çš„é¡µé¢å…ƒç´ ï¼ˆæˆ–å¤æ‚æˆ–ç®€å•ï¼‰éƒ½å¯ä»¥è¢«è§†ä½œä¸€ä¸ªå—ã€‚å®ƒçš„ `HTML` å®¹å™¨ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ `CSS` ç±»åï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå—çš„åå­—ã€‚

é’ˆå¯¹å—çš„CSSç±»åä¼šåŠ ä¸€äº›å‰ç¼€ `md-`ï¼Œè¿™äº›å‰ç¼€åœ¨ `CSS` ä¸­æœ‰ç±»ä¼¼å‘½åç©ºé—´çš„ä½œç”¨ã€‚  

ä¸€ä¸ªå—çš„ç»éªŒå®šä¹‰æœ‰ä¸‹é¢ä¸‰ä¸ªåŸºæœ¬åŸåˆ™ï¼š

- CSSä¸­åªèƒ½ä½¿ç”¨ç±»åï¼ˆä¸èƒ½æ˜¯IDï¼‰ã€‚
- æ¯ä¸€ä¸ªå—ååº”è¯¥æœ‰ä¸€ä¸ªå‘½åç©ºé—´ï¼ˆå‰ç¼€ï¼‰ã€‚
- æ¯ä¸€æ¡CSSè§„åˆ™å¿…é¡»å±äºä¸€ä¸ªå—ã€‚
> å¦‚ï¼š`md-button`

### å…ƒç´ ï¼ˆelementï¼‰

å—ä¸­åŒ…å«è‹¥å¹²å­å…ƒç´ ï¼Œä¸”è¿™ä¸ªå­å…ƒç´ å¾€å¾€è¢«è®¤ä¸ºæ˜¯ç›´æ¥å­å…ƒç´ ã€‚**ä¸€ä¸ªå—ä¸­çš„å…ƒç´ ç±»åå¿…é¡»ä½¿ç”¨çˆ¶çº§å—çš„åç§°ä½œä¸ºå‰ç¼€**  

å¦‚ `md-button`ï¼Œ`content` æ˜¯ `button` çš„ä¸€ä¸ªå­å…ƒç´ 
```css
ğŸ‘‹
.md-button {}
.md-button .content {}

ğŸ‘
.md-button {}
.md-button_content {}
```

### ä¿®é¥°ç¬¦ï¼ˆmodifierï¼‰

ä¿®é¥°ç¬¦é€šå¸¸ç”¨æ¥æè¿°ä¸€ä¸ªå—æˆ–è€…å…ƒç´ çš„ä¸€ä¸ªçŠ¶æ€æˆ–è€…å…¶æŒæœ‰çš„ç‰¹å®šå±æ€§ã€‚

ç”¨ `button` æ¥ä¸¾ä¾‹æœ€å¥½ä¸è¿‡äº†ã€‚ä¸€ä¸ªæŒ‰é’®å¯èƒ½ä¼šæœ‰å››ä¸ªå°ºå¯¸ï¼šè¿·ä½ ï¼Œå°ï¼Œæ­£å¸¸ï¼Œå¤§ï¼›å°±å¯ä»¥ç”¨ä¿®é¥°ç¬¦æ¥æè¿°
```css
ğŸ‘‹
.md-button {}
.md-button .mini {}
.md-button .small {}
.md-button .normal {}
.md-button .large {}

ğŸ‘
.md-button {}
.md-button--mini {}
.md-button--small {}
.md-button--normal {}
.md-button--large {}
```

### âœï¸ ä¹¦å†™é£æ ¼

é¡¹ç›®é‡‡ç”¨ `stylus` é¢„å¤„ç†ï¼Œå»æ‰æ‰€æœ‰èŠ±æ‹¬å·å’Œåˆ†å·ï¼Œç»Ÿä¸€ç”¨ç¼©è¿›ä»£æ›¿ï¼Œè¯·å‹¿ä½¿ç”¨ `CSS` åŸç”Ÿè¯­æ³•ã€‚

```stylus
ğŸ‘‹
.md-button
  width 100%
.md-button_content
  width 100%
.md-button--active
  background $highlight

ğŸ‘
.md-button
  width 100%
  &_content
    width 100%
  &--active
    background $highlight
```
æ ·å¼å±æ€§é¡ºåºå°½å¯èƒ½çš„ä¿æŒå¦‚ä¸‹è§„åˆ™
- å®šä½ï¼š`position z-index left right top bottom clip` ç­‰ã€‚
- è‡ªèº«å±æ€§ï¼š`width height min-height max-height min-width max-width` ç­‰ã€‚
- æ–‡å­—æ ·å¼ï¼š`color font-size letter-spacing, color text-align` ç­‰ã€‚
- èƒŒæ™¯ï¼š`background-image border` ç­‰ã€‚
- æ–‡æœ¬å±æ€§: `text-align vertical-align text-wrap text-transform text-indent text-decoration letter-spacing word-spacing white-space text-overflow` ç­‰ã€‚
- css3ä¸­å±æ€§ï¼š`contentã€box-shadowã€animationã€border-radiusã€transform` ç­‰

### å…¶ä»–

`BEM` æ—¨åœ¨è§£å†³å‘½åç©ºé—´æ±¡æŸ“å’Œç»„ä»¶è§£è€¦ï¼Œç¼ºç‚¹æ˜¯ä¼šå¯¼è‡´ç±»åå˜é•¿ã€‚

## :warning: è¿ç§»è¯´æ˜

### å¼•å…¥ä¾èµ–

- **å¼•å…¥å·¥å…·å‡½æ•°**: åŸæœ‰çš„`_mixin`,`_style`,`_scroller`,`_utils`è¿ç§»åˆ°`@mand-mobile/shared`ç›®å½•ä¸‹
- **å¼•å…¥å¹³å°ä»£ç **: æ‰€æœ‰çš„å¹³å°ä»£ç è¿ç§»è‡³`platform`åŒ…ä¸‹çš„`src/[platfrom]/runtime/xxx`æ–‡ä»¶ä¸‹ï¼Œé€šè¿‡`import anything from 'lib/runtime/xxx'`è¿›è¡Œå¼•å…¥ä¾èµ–ï¼Œæˆ‘ä»¬çš„å·¥ç¨‹åŒ–ä½“ç³»ä¼šæ ¹æ®ç›¸åº”æŒ‡ä»¤è‡ªåŠ¨åŠ è½½å¹³å°ä¾èµ–

### å¼€å‘Demo

- **å¼•å…¥ç»„ä»¶**:  ä¸æ”¯æŒé€šè¿‡åˆ«å`mand-mobile`è¿›è¡Œè®¿é—®ï¼Œä»…æ”¯æŒé€šè¿‡ç›¸å¯¹è·¯å¾„è¿›è¡Œè®¿é—®
- **ç»„ä»¶æŒ‚è½½**: å¼€å‘è¿‡ç¨‹ä¸­ä¸æ”¯æŒé€šè¿‡eg. `[Button.name]: Button`æŒ‚è½½ç»„ä»¶
- **Demoå…¥å£**: æ— éœ€åœ¨`demos`ç›®å½•ä¸‹æ”¾ç½®`index.vue`å…¥å£æ–‡ä»¶

### ç»„ä»¶æš´éœ²

#### Component.jsç¼–å†™è§„èŒƒ: 

ä»¥buttonä¸ºä¾‹ï¼Œéœ€è¦åœ¨ç»„ä»¶æ ¹ç›®å½•æ”¾ç½®`component.js`ç”¨äºç”Ÿæˆå±•ç¤ºç¤ºä¾‹å’Œå¼€å‘é¢„è§ˆæ‰€å¿…è¦çš„å…ƒä¿¡æ¯

:blush: å¦‚æœæ˜¯ç”¨äºæš´éœ²APIçš„ç»„ä»¶æ¯”å¦‚`Form-Item`ï¼Œç»„ä»¶ç›®å½•ä¸‹æ— éœ€é…ç½®`component.js`æ–‡ä»¶

```json
export default {
  'name': 'tag',
  'text': 'æ ‡ç­¾',
  'category': 'basic',
  'description': 'å°æ ‡ç­¾',
  'author': 'guoyunlong <byterotate@gmail.com>'
}

```

