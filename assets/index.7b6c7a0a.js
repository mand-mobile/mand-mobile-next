import{g as e,y as a,h as t,o as r,a5 as l,a as n,i as s,d as i,j as o,F as c,k as u,f as v}from"./app.49a262c4.js";var m={content:{type:String,default:""},spacing:{type:[String,Number],default:"20vw"},repeatX:{type:Boolean,default:!0},repeatY:{type:Boolean,default:!0},rotate:{type:[String,Number],default:-30},opacity:{type:[String,Number],default:.1}},f=e=>{const n=a(null),s=a(null),i=t((()=>s.value?s.value.getContext("2d"):null));let o=0,c=0,u=2,v=0;return r((()=>{u=Math.max(l(),2),(()=>{var e;if(n.value&&s.value){const{clientHeight:a,clientWidth:t}=n.value;o=s.value.height=a*u,c=s.value.width=t*u,null==(e=i.value)||e.scale(1/u,1/u)}})(),(()=>{var a;const{spacing:t}=e;if("number"==typeof t)return void(v=t);const[,r=20,l="vw"]=null!=(a=/([0-9]+)([A-Za-z]+)/.exec(t))?a:[,20,"vw"];if("px"===l)v=Number(r);else if("vh"===l){const e=window.screen.height;v=Number(r)*e/100}else if("vw"===l){const e=window.screen.width;v=Number(r)*e/100}v*=u})(),(()=>{const{content:a}=e,t=14*u,r=a.length*t,l=Math.ceil(c*u/(r+v)),n=Math.ceil(o*u/(t+v));if(i.value){i.value.font=`${t}px DIN Alternate, "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif`,i.value.fillStyle="#858B9C";let e=0,s=0;for(let o=0;o<n;o++){e=0;for(let t=0;t<l;t++)i.value.fillText(a,e,s),e+=r;s+=t+v}}})()})),{markRef:n,canvasRef:s}},p=e({name:"MdWaterMark",props:m,setup(e){const{markRef:a,canvasRef:t}=f(e);return{mark:a,canvas:t}}}),d={class:"md-water-mark"},g={class:"water-mark-container"},w={key:0,ref:"mark",class:"water-mark-list"},k={key:0,ref:"canvas",class:"water-mark-canvas"};p.render=function(e,a){return n(),s("div",d,[i("div",g,[o(e.$slots,"default")]),e.$slots.watermark||e.content?(n(),s("div",w,[i("div",{class:"water-mark-list-wrapper",style:{opacity:e.opacity,transform:`rotate(${e.rotate}deg)`}},[e.content?(n(),s("canvas",k,null,512)):e.$slots.watermark?(n(!0),s(c,{key:1},u(e.repeatY?50:1,(a=>(n(),s("ul",{key:`line-${a}`,class:"water-mark-line",style:{marginBottom:e.spacing}},[(n(!0),s(c,null,u(e.repeatX?50:1,(t=>(n(),s("li",{key:`item-${t}`,class:"water-mark-item",style:a%2==0?{marginLeft:e.repeatX?e.spacing:0}:{marginRight:e.repeatX?e.spacing:0}},[o(e.$slots,"watermark",{coord:{row:a,col:t}})],4)))),128))],4)))),128)):v("v-if",!0)],4)],512)):v("v-if",!0)])};var y=p;y.install=e=>{e.component(y.name,y)};var h=y;export{h as w};
