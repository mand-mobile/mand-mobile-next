import{_ as e}from"./index.354c07ee.js";import{_ as t}from"./animate.4fe17de0.js";import{U as o}from"./constants.3b37bb64.js";import{m as n,k as a,j as l,B as p,d as s,r,o as i,c,p as u,v as d,f as m,s as f,w as v,z as k,n as b,T as y,F as C,t as x,l as h}from"./vendor.cf144a98.js";const S={modelValue:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:!0},position:{type:String,default:"center"},transition:{type:String,default:""},hasMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preventScroll:{type:Boolean,default:!1},preventScrollExclude:{type:[Object,String],default:void 0}},g=(e,{emit:t})=>{const s=n(!1),r=n(null),i=n(null),c=a((()=>{if(e.transition)return e.transition;switch(e.position){case"bottom":return"md-slide-up";case"top":return"md-slide-down";case"left":return"md-slide-right";case"right":return"md-slide-left";default:return"md-fade"}}));return l((()=>{var t;const o="string"==typeof e.preventScrollExclude?null==(t=i.value)?void 0:t.querySelector(e.preventScrollExclude):e.preventScrollExclude,n=(t=!0)=>{e.preventScroll&&r.value&&i.value&&o&&function(e,t,o,n){const a=e?"addEventListener":"removeEventListener";null==t||t[a]("touchmove",L,!1),null==o||o[a]("touchmove",L,!1),function(e,t){const o=e?"addEventListener":"removeEventListener";null==t||t[o]("touchmove",T,!1)}(e,n)}(t,r.value,i.value,o)};p((()=>e.modelValue),(e=>{e?(s.value=e,n()):n(!1)}),{immediate:!0})})),{isPopupShow:s,currentTransition:c,boxRef:i,maskRef:r,popupMaskClick:()=>{e.maskClosable&&(t("maskClick"),t(o,!1))},popupLeave:function(){s.value=!1,t("hide")},popupAppear:function(){t("show")},beforePopupAppear:function(){t("beforeShow")},beforePopupLeave:function(){t("beforeHide")}}};function L(e){e.preventDefault()}function T(e){e.stopImmediatePropagation()}var A=s({name:"MdPopup",components:{MdTransition:e},inheritAttrs:!1,props:S,emits:[o,"maskClick","show","hide","beforeShow","beforeHide"],setup(e,t){const{isPopupShow:o,currentTransition:n,popupMaskClick:a,popupLeave:l,popupAppear:p,beforePopupAppear:s,beforePopupLeave:r,maskRef:i,boxRef:c}=g(e,t);return{isPopupShow:o,currentTransition:n,popupMaskClick:a,popupLeave:l,popupAppear:p,beforePopupAppear:s,beforePopupLeave:r,mask:i,box:c}}});A.render=function(e,t,o,n,a,l){const p=r("md-transition");return i(),c(y,{to:"body",disabled:!e.appendToBody},[u(m("div",{class:["md-popup",[e.hasMask?"with-mask":"",e.position]]},[m(f,{name:"md-mask-fade"},{default:v((()=>[u(m("div",{ref:"mask",class:"md-popup-mask",onClick:t[1]||(t[1]=(...t)=>e.popupMaskClick&&e.popupMaskClick(...t))},null,512),[[d,e.hasMask&&e.modelValue]])])),_:1}),m(p,k(e.$attrs,{name:e.currentTransition,onBeforeEnter:e.beforePopupAppear,onBeforeLeave:e.beforePopupLeave,onAfterEnter:e.popupAppear,onAfterLeave:e.popupLeave}),{default:v((()=>[u(m("div",{ref:"box",class:["md-popup-box",[e.currentTransition]]},[b(e.$slots,"default")],2),[[d,e.modelValue]])])),_:3},16,["name","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"])],2),[[d,e.isPopupShow]])],8,["disabled"])};var P=s({name:"MdPopupTitleBar",components:{MdIcon:t},props:{title:{type:String,default:""},describe:{type:String,default:""},okText:{type:String,default:""},cancelText:{type:String,default:""},titleAlign:{type:String,default:"center"},onlyClose:{type:Boolean,default:!1}},emits:["cancel","confirm"]});const B={key:1,class:"title-bar-title"},$={key:2,class:"title-bar-title"};P.render=function(e,t,o,n,a,l){const p=r("md-icon");return i(),c("div",{class:["md-popup-title-bar",[`title-align-${e.titleAlign}`]]},[e.onlyClose?h("",!0):(i(),c(C,{key:0},[e.cancelText?(i(),c("div",{key:0,class:"title-bar-left md-popup-cancel",onClick:t[1]||(t[1]=t=>e.$emit("cancel")),textContent:x(e.cancelText)},null,8,["textContent"])):e.$slots.cancel?(i(),c("div",{key:1,class:"title-bar-left md-popup-cancel",onClick:t[2]||(t[2]=t=>e.$emit("cancel"))},[b(e.$slots,"cancel")])):h("",!0)],64)),e.title?(i(),c("div",B,[e.title?(i(),c("p",{key:0,class:"title",textContent:x(e.title)},null,8,["textContent"])):h("",!0),e.describe?(i(),c("p",{key:1,class:"describe",textContent:x(e.describe)},null,8,["textContent"])):h("",!0)])):(i(),c("div",$,[b(e.$slots,"title")])),e.onlyClose?h("",!0):(i(),c(C,{key:3},[e.okText?(i(),c("div",{key:0,class:"title-bar-right md-popup-confirm",onClick:t[3]||(t[3]=t=>e.$emit("confirm")),textContent:x(e.okText)},null,8,["textContent"])):e.$slots.confirm?(i(),c("div",{key:1,class:"title-bar-right md-popup-confirm",onClick:t[4]||(t[4]=t=>e.$emit("confirm"))},[b(e.$slots,"confirm")])):h("",!0)],64)),e.onlyClose?(i(),c("div",{key:4,class:"title-bar-right md-popup-close",onClick:t[5]||(t[5]=t=>e.$emit("cancel"))},[m(p,{name:"close",size:"lg"})])):h("",!0)],2)},A.install=e=>{e.component(A.name,A),e.component(P.name,P)};export{A as _,P as a};
