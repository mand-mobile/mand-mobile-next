import{_ as e}from"./index.07a9c227.js";import{c as l}from"./click-outside.de9d7ac4.js";import"./animate.d048e3d3.js";import{U as t}from"./constants.3b37bb64.js";import{k as a,m as o,P as n,j as d,d as s,r as u,C as r,o as i,c,p,f as m,F as f,h as y,g as b,t as v,l as x,n as k}from"./vendor.cf144a98.js";const g={modelValue:{type:String,default:""},maxlength:{type:Number,default:4},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},justify:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},system:{type:Boolean,default:!1},okText:{type:String},disorder:{type:Boolean,default:!1},isView:{type:Boolean,default:!1}};function h(e,l=100){if(e){const t=document.createElement("input");t.style.position="absolute",t.style.top=e.offsetTop+7+"px",t.style.left=e.offsetLeft+"px",t.style.height="0px",t.style.opacity="0",t.style.border="none",t.style.outline="none",document.body.appendChild(t),t.focus(),setTimeout((function(){var l,t;null==(l=null==e?void 0:e.focus)||l.call(e),null==(t=null==e?void 0:e.click)||t.call(e)}),l);return()=>{t&&(t.focus(),t.blur(),document.body.removeChild(t))}}}var H=s({name:"MdCodebox",components:{MdNumberKeyboard:e},directives:{clickOutside:l},props:g,emits:[t],setup(e,l){const{code:s,focused:u,focusHandler:r,blurHandler:i,inputHandler:c,nativeInputHandler:p,deleteHandler:m,numberKeyBoardRef:f,box:y,nativeInputRef:b}=((e,{emit:l})=>{const s=a({get:()=>e.modelValue,set:e=>l(t,e)}),u=o(!1),r=()=>{var l;u.value=!0,e.system&&(null==(l=m.value)||l.focus())},i=()=>{u.value=!1},c=o(null),p=a((()=>{var e,l;return null==(l=null==(e=c.value)?void 0:e.$refs.popup)?void 0:l.box})),m=o(null);return n((()=>{s.value.length>=e.maxlength&&i()})),d((()=>{e.autofocus&&r()})),{code:s,focused:u,focusHandler:r,blurHandler:i,inputHandler:l=>{s.value.length<e.maxlength&&(s.value+=`${l}`)},nativeInputHandler:l=>{l.target.value.length<=e.maxlength&&(s.value=l.target.value)},deleteHandler:()=>{s.value=`${s.value}`.slice(0,-1)},numberKeyBoardRef:c,box:p,nativeInputRef:m}})(e,l);return{code:s,focused:u,focusHandler:r,blurHandler:i,inputHandler:c,nativeInputHandler:p,deleteHandler:m,numberKeyBoard:f,box:y,input:b}}});const B={class:"md-codebox-wrapper"},j={key:0,class:"md-codebox-dot"},I={key:1,class:"md-codebox-blink"};H.render=function(e,l,t,a,o,n){const d=u("md-number-keyboard"),s=r("click-outside");return i(),c("div",B,[p(m("div",{class:["md-codebox",{"is-disabled":e.disabled,"is-justify":e.justify}],onClick:l[2]||(l[2]=(...l)=>e.focusHandler&&e.focusHandler(...l))},[e.maxlength>0?(i(!0),c(f,{key:0},y(e.maxlength,(l=>(i(),c("span",{key:l,class:["md-codebox-box",l===e.code.length+1&&e.focused&&"is-active",e.code[l-1]&&"is-filled"]},[e.code[l-1]?(i(),c(f,{key:0},[e.mask?(i(),c("i",j)):(i(),c(f,{key:1},[b(v(e.code[l-1]),1)],64))],64)):x("",!0),l===e.code.length+1&&e.focused?(i(),c("i",I)):x("",!0)],2)))),128)):(i(),c(f,{key:1},[e.mask?(i(),c("input",{key:0,type:"password",maxlength:e.maxlength,value:e.code,readonly:"",disabled:"",class:["md-codebox-holder",e.focused&&"is-active"]},null,10,["maxlength","value"])):(i(),c("input",{key:1,type:"text",maxlength:e.maxlength,value:e.code,readonly:"",disabled:"",class:["md-codebox-holder",e.focused&&"is-active"]},null,10,["maxlength","value"]))],64)),e.system?(i(),c("input",{key:2,ref:"input",value:e.code,type:e.mask?"password":"text",maxlength:e.maxlength,class:"md-codebox-input",onInput:l[1]||(l[1]=(...l)=>e.nativeInputHandler&&e.nativeInputHandler(...l))},null,40,["value","type","maxlength"])):x("",!0)],2),[[s,e.blurHandler,e.box]]),k(e.$slots,"default"),k(e.$slots,"keyboard",{focused:e.focused,refs:e.numberKeyBoard,inputHandler:e.inputHandler,deleteHandler:e.deleteHandler},(()=>[e.system?x("",!0):(i(),c(d,{key:0,ref:"numberKeyBoard",visible:e.focused,"onUpdate:visible":l[3]||(l[3]=l=>e.focused=l),class:"fake-input-keyboard",type:"simple","ok-text":e.okText,disorder:e.disorder,"is-view":e.isView,onEnter:e.inputHandler,onDelete:e.deleteHandler},null,8,["visible","ok-text","disorder","is-view","onEnter","onDelete"]))]))])},H.install=e=>{e.component(H.name,H)};export{H as _,h as f};
