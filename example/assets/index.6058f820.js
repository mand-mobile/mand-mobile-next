import{_ as e}from"./index.e25a381b.js";import{_ as a}from"./index.2b17b48d.js";import{_ as t}from"./animate.27a3b560.js";import{_ as s}from"./index.c6163b2d.js";import{e as r,D as i,b as l}from"./constants.3b37bb64.js";import{m as n,P as o,B as d,d as m,r as c,o as u,c as f,f as p,F as w,h as g,w as v,l as h,n as b,t as I}from"./vendor.cf144a98.js";const y={visible:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},defaultIndex:{type:Number,default:0},hasDots:{type:Boolean,default:!0},deletable:{type:Boolean,default:!1}};var k=m({name:"MdImageViewer",components:{MdSwiper:e,MdTag:a,MdIcon:t,MdTransition:s},props:y,emits:[r,i,l],setup(e,a){const{currentImgIndex:t,isViewerShow:s,dataList:m,closeViewer:c,showViewer:u,afterChange:f,onDeleteImage:p}=((e,{emit:a})=>{const t=n(0),s=n(!1),m=n([]);return o((()=>{s.value=e.visible})),o((()=>{m.value=(e=>{const a=[];return e.map((e=>{const t="object"==typeof e?e:{dataUrl:e};a.push(t)})),a})(e.list)})),d((()=>e.defaultIndex),((e,a)=>{t.value=e})),{currentImgIndex:t,isViewerShow:s,dataList:m,onDeleteImage:e=>{m.value.splice(e,1),a(r,m),a(i,e)},showViewer:e=>{s.value=!0,t.value=e,a(l,!0)},closeViewer:()=>{s.value=!1,a(l,!1)},afterChange:(e,a)=>{t.value=a}}})(e,a);return{currentImgIndex:t,isViewerShow:s,dataList:m,onDeleteImage:p,closeViewer:c,showViewer:u,afterChange:f}}});const x={class:"md-image-viewer-box"},V={class:"md-image-list"},C={class:"md-swipper-warp"},_={class:"item"},j={key:0,class:"md-viewer-index"};k.render=function(e,a,t,s,r,i){const l=c("md-icon"),n=c("md-tag"),o=c("md-swiper"),d=c("md-transition");return u(),f("div",x,[p("div",V,[(u(!0),f(w,null,g(e.dataList,((a,t)=>(u(),f("div",{key:t,class:"md-image-item preview",style:{backgroundImage:`url(${a.dataUrl})`,backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},onClick:a=>e.showViewer(t)},[e.deletable?(u(),f(n,{key:0,class:"md-image-item-del",size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff",onClick:a=>e.onDeleteImage(t)},{default:v((()=>[p(l,{name:"close"})])),_:2},1032,["onClick"])):h("",!0)],12,["onClick"])))),128)),b(e.$slots,"default")]),p(d,{name:"md-fade"},{default:v((()=>[e.isViewerShow?(u(),f("div",{key:0,class:"md-image-viewer",onClick:a[1]||(a[1]=(...a)=>e.closeViewer&&e.closeViewer(...a))},[p("div",C,[p(o,{ref:"swiper",autoplay:0,"default-index":e.currentImgIndex,"has-dots":!1,"is-prevent":!1,onAfterChange:e.afterChange},{default:v((()=>[(u(!0),f(w,null,g(e.dataList,((e,a)=>(u(),f("div",{key:a,class:"md-viewer-item"},[p("div",_,[e.dataUrl?(u(),f("img",{key:0,src:e.dataUrl,alt:e.dataUrl},null,8,["src","alt"])):h("",!0)])])))),128))])),_:1},8,["default-index","onAfterChange"]),e.hasDots?(u(),f("div",j,I(e.currentImgIndex+1)+"/"+I(e.dataList.length),1)):h("",!0)])])):h("",!0)])),_:1})])},k.install=e=>{e.component(k.name,k)};export{k as _};
