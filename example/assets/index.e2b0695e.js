var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import"./animate.8ea3c80e.js";import{U as s,C as r}from"./constants.3b37bb64.js";import{B as o}from"./core.esm.e5e53058.js";import{m as i,k as d,D as m,B as c,j as u,u as f,d as p,o as b,c as k,f as v,F as h,p as y,v as w,l as S,h as x,n as g,g as I,t as O}from"./vendor.cf144a98.js";const j={modelValue:{type:[String,Number],default:""},items:{type:Array,default:()=>[]},hasInk:{type:Boolean,default:!0},inkLength:{type:Number,default:0},immediate:{type:Boolean,default:!1}},L=(e,{emit:p})=>{let b=null;const k=i(null),v=i(null),h=i(!1),y=()=>{var e,s;b&&(b.destroy(),b=null),k.value&&(e=k.value,b=new o(e,((e,s)=>{for(var r in s||(s={}))t.call(s,r)&&n(e,r,s[r]);if(a)for(var r of a(s))l.call(s,r)&&n(e,r,s[r]);return e})({scrollX:!0,scrollY:!1,probeType:3,tap:"tap"},s)))};function w(){var e,a,t;const l=null!=(a=null==(e=k.value)?void 0:e.getBoundingClientRect().width)?a:0,n=Array.from((null==(t=v.value)?void 0:t.children)||[]).reduce(((e,a)=>e+a.getBoundingClientRect().width),0);h.value=Math.ceil(l-n)<0,h.value&&(k.value.querySelector(".md-tab-bar-list").style.display="inline-block",y(),function(e,a){const t=10;null==b||b.on("scroll",(l=>{l.x<0&&Math.abs(l.x)>t?S.value=!0:S.value=!1,Math.abs(l.x)>a-e-t?x.value=!1:x.value=!0}))}(l,n))}const S=i(!1),x=i(!0);const g=i("0px"),I=i("0px"),O=d((()=>e.items.findIndex((a=>a.name===e.modelValue)))),j=e=>{var a;const t=Array.from((null==(a=v.value)?void 0:a.children)||[]);null==b||b.scrollToElement(t[e],300,!0,!1)},L=()=>{-1!==f(O)&&(B(f(O)),j(f(O))),e.immediate&&-1!==f(O)&&p(r,e.items[f(O)],O)},B=a=>{var t;const l=Array.from((null==(t=v.value)?void 0:t.children)||[]),n=l.map((e=>e.getBoundingClientRect().width)),s=l.map((e=>e.offsetLeft));I.value=`${n[a]}px`,g.value=`${s[a]}px`,m((()=>{if(e.inkLength){const t=n[a]-e.inkLength;I.value=`${e.inkLength}px`,g.value=`${s[a]+t/2}px`}}))};return c((()=>e.modelValue),(()=>{L()})),u((()=>{w(),L()})),{wrapRef:k,contentRef:v,scrollable:h,maskStartShown:S,maskEndShown:x,modelIndex:O,clickHandle:(e,a)=>{e.disabled||(B(a),j(a),p(s,e.name),p(r,e,a))},inkWidth:I,inkOffsetLeft:g,setInkStyle:B}};var B=p({name:"MdTabBar",props:j,emits:[r,s],setup(e,a){const{wrapRef:t,contentRef:l,scrollable:n,maskStartShown:s,maskEndShown:r,clickHandle:o,modelIndex:i,inkWidth:d,inkOffsetLeft:m,setInkStyle:c}=L(e,a);return{wrapper:t,content:l,scrollable:n,maskStartShown:s,maskEndShown:r,modelIndex:i,clickHandle:o,inkWidth:d,inkOffsetLeft:m,setInkStyle:c}}});const R={class:"md-tab-bar"},C={ref:"wrapper",class:"md-tab-bar-inner"},E={class:"md-tab-bar-start"},$={class:"md-tab-bar-end"},H={ref:"content",class:"md-tab-bar-list"};B.render=function(e,a,t,l,n,s){return b(),k("div",R,[v("div",C,[e.scrollable?(b(),k(h,{key:0},[y(v("div",E,null,512),[[w,e.maskStartShown]]),y(v("div",$,null,512),[[w,e.maskEndShown]])],64)):S("",!0),v("div",H,[(b(!0),k(h,null,x(e.items,((a,t)=>(b(),k("a",{key:t,ref:"items",class:["md-tab-bar-item",{"is-active":e.modelValue===a.name,"is-disabled":!!a.disabled}],onClick:l=>e.clickHandle(a,t),onTap:l=>e.clickHandle(a,t)},[g(e.$slots,"default",{item:a,items:e.items,index:t,currentName:e.modelValue},(()=>[I(O(a.label),1)]))],42,["onClick","onTap"])))),128)),e.hasInk?(b(),k("span",{key:0,class:["md-tab-bar-ink",{"is-disabled":e.items[e.modelIndex]&&e.items[e.modelIndex].disabled}],style:{width:e.inkWidth,transform:`translateX(${e.inkOffsetLeft})`}},null,6)):S("",!0)],512)],512)])},B.install=e=>{e.component(B.name,B)};export{B as _};
