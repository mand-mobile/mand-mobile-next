var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(n,t,a)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,l=(e,n)=>{for(var t in n||(n={}))o.call(n,t)&&i(e,t,n[t]);if(a)for(var t of a(n))s.call(n,t)&&i(e,t,n[t]);return e};import{_ as c,a as r}from"./index.7da0444e.js";import{_ as d}from"./animate.d048e3d3.js";import{_ as u}from"./index.39e75062.js";import{_ as p}from"./index.c39e7046.js";import{_ as m}from"./index.8a6b337e.js";import{_ as h}from"./index.7f06745e.js";import{u as y}from"./show.c01af516.js";import{t as b}from"./index.0698aebd.js";import{U as f}from"./constants.3b37bb64.js";import{n as x}from"./function.da7d2fdb.js";import{m as v,M as S,B as g,k as C,d as T,r as k,o as w,c as O,f as j,l as M,n as V,w as H,g as P,t as B,F as A,h as L,u as _,i as D}from"./vendor.cf144a98.js";import{c as I}from"./index.849d981a.js";import"./index.f6ebf231.js";import"./index.44046f1d.js";import"./use-create.265aacc2.js";import"./index.93932acd.js";import"./index.07a9c227.js";import"./click-outside.de9d7ac4.js";import"./index.188dd1e6.js";import"./index.890fa8e4.js";import"./index.a796ea8e.js";import"./index.0fa4d1f2.js";const $={visible:{type:Boolean,default:!1},title:{type:String,default:b("md.cashier.pay")},describe:{type:String,default:""},channels:{type:Array,default:()=>[]},channelLimit:{type:Number,default:2},defaultIndex:{type:Number,default:0},paymentTitle:{type:String,default:b("md.cashier.payCash")},paymentAmount:{type:String,default:"0.00"},paymentDescribe:{type:String,default:""},payButtonText:{type:String,default:b("md.cashier.confirmPay")},payButtonDisabled:{type:Boolean,default:!1},moreButtonText:{type:String,default:b("md.cashier.morePayWays")}},N={paymentTitle:{type:String,default:""},paymentAmount:{type:String,default:""},paymentDescribe:{type:String,default:""},moreButtonText:{type:String,default:""},payButtonText:{type:String,default:""},payButtonDisabled:{type:Boolean,default:!1},channels:{type:Array,default:""},channelLimit:{type:Number,default:0},modelValue:{type:[Number,String],default:""}};var U=T({components:{MdIcon:d,MdRadioList:h,MdButton:m},props:N,emits:["pay","update:modelValue"],setup(e,n){const{innerValue:t,isSingle:a,currentIndex:o,isChannelShow:s,toggleShowAllChannel:i,channelPayClick:l,displayChannels:c}=((e,{emit:n})=>{const t=C({get:()=>e.modelValue,set:e=>n(f,e)}),a=C((()=>e.channelLimit<1||e.channels.length>e.channelLimit)),o=C((()=>e.channels.findIndex((n=>n.value===e.modelValue)))),s=v(!1),i=C((()=>s.value?e.channels:[e.channels[-1!==o.value?o.value:0]]));return{innerValue:t,isSingle:a,currentIndex:o,isChannelShow:s,toggleShowAllChannel:()=>{s.value=!s.value},channelPayClick:()=>{const t=e.channels[o.value];n("pay",t)},displayChannels:i}})(e,n);return{innerValue:t,isSingle:a,currentIndex:o,displayChannels:c,isChannelShow:s,toggleShowAllChannel:i,channelPayClick:l}}});const z={class:"md-cashier-channel"},R={class:"choose-text"},F={class:"choose-channel"},Q={class:"choose-channel-list"},E={key:1,class:"item-image"},W={class:"md-cashier-block-btn"};U.render=function(e,n,t,a,o,s){const i=k("md-icon"),l=k("md-radio-list"),c=k("md-button");return w(),O("div",z,[j("div",R,[e.paymentTitle?(w(),O("p",{key:0,class:"choose-title",innerHTML:e.paymentTitle},null,8,["innerHTML"])):M("",!0),e.paymentAmount?(w(),O("p",{key:1,class:"choose-number",innerHTML:e.paymentAmount},null,8,["innerHTML"])):M("",!0),e.paymentDescribe?(w(),O("p",{key:2,class:"choose-describe",innerHTML:e.paymentDescribe},null,8,["innerHTML"])):M("",!0)]),j("div",F,[V(e.$slots,"default"),j("div",Q,[j(l,{modelValue:e.innerValue,"onUpdate:modelValue":n[1]||(n[1]=n=>e.innerValue=n),options:e.isSingle?e.displayChannels:e.channels,"icon-position":"right"},{left:H((({option:e})=>[e.icon?(w(),O(i,{key:0,name:e.icon,size:"lg"},null,8,["name"])):e.img?(w(),O("div",E,[j("img",{src:e.img},null,8,["src"])])):M("",!0)])),_:1},8,["modelValue","options"])]),e.isSingle?(w(),O("div",{key:0,class:["choose-channel-more",[e.isChannelShow?"active":""]],onClick:n[2]||(n[2]=(...n)=>e.toggleShowAllChannel&&e.toggleShowAllChannel(...n)),innerHTML:e.moreButtonText},null,10,["innerHTML"])):M("",!0)]),j("div",W,[j(c,{class:"md-cashier-pay-button",type:e.payButtonDisabled?"disabled":"primary",onClick:e.channelPayClick},{default:H((()=>[V(e.$slots,"button",{},(()=>[P(B(e.payButtonText),1)]))])),_:3},8,["type","onClick"])])])};var q=T({name:"MdCashierChannelButton",components:{[m.name]:m},props:{actions:{type:Array,default:()=>[]}}});const G={class:"md-cashier-block-btn"};q.render=function(e,n,t,a,o,s){const i=k("md-button");return w(),O("div",G,[(w(!0),O(A,null,L(e.actions,((n,t)=>(w(),O(i,{key:t,type:t===e.actions.length-1?"primary":"default",inline:e.actions.length>1,onClick:()=>{n.handler&&n.handler()},innerHTML:n.buttonText},null,8,["type","inline","onClick","innerHTML"])))),128))])};var J=T({name:"MdCashier",components:{MdPopup:c,MdPopupTitleBar:r,MdCashierChannel:U,MdIcon:d,MdCaptcha:u,MdActivityIndicatorSuccess:p,MdCashierChannelButton:q},props:$,emits:["pay","hide","update:visible","show","select"],setup(e,n){const{popupShow:t,onShow:a,onHide:o,hide:s,scene:i,sceneOption:c,currentPayChannelValue:r,payHandler:d,next:u}=((e,{emit:n})=>{const{popupShow:t,onShow:a,onHide:o,hide:s}=y(e,n),i=v("choose"),c=S({loading:{text:b("md.cashier.payResultSearch")},success:{text:b("md.cashier.paySuccess"),buttonText:b("md.cashier.confirm"),handler:null},fail:{text:b("md.cashier.payFail"),buttonText:b("md.cashier.confirm"),handler:null},captcha:{text:"",brief:"",maxlength:4,count:60,autoCountdown:!0,onSend:x,onSubmit:x,countNormalText:"",countActiveText:""}}),r=v(e.channels[0].value);return g(r,(e=>{n("select",e)})),{popupShow:t,onShow:a,onHide:o,hide:s,scene:i,sceneOption:c,currentPayChannelValue:r,payHandler:()=>{n("pay",r)},next:(e,n={})=>{i.value=e,c[i.value]=l(l({},c[i.value]),n)}}})(e,n);return{popupShow:t,onShow:a,onHide:o,hide:s,scene:i,sceneOption:c,currentPayChannelValue:r,payHandler:d,next:u}}});const K={class:"md-cashier-container"},X={key:0,class:"md-cashier-block md-cashier-choose"},Y={key:1,class:"md-cashier-block md-cashier-captcha"},Z={class:"md-cashier-block-icon"},ee={class:"md-cashier-block-text"},ne={key:3,class:"md-cashier-block md-cashier-fail"},te={class:"md-cashier-block-icon"},ae={key:4,class:"md-cashier-block md-cashier-custom"};J.render=function(e,n,t,a,o,s){const i=k("md-popup-title-bar"),l=k("md-cashier-channel"),c=k("md-captcha"),r=k("md-activity-indicator-success"),d=k("md-cashier-channel-button"),u=k("md-icon"),p=k("md-popup");return w(),O(p,{modelValue:e.popupShow,"onUpdate:modelValue":n[2]||(n[2]=n=>e.popupShow=n),class:"md-cashier",position:"bottom","mask-closable":!1,"prevent-scroll":!0,"prevent-scroll-exclude":".md-cashier-container",onHide:e.onHide,onShow:e.onShow},{default:H((()=>[j(i,{title:e.title,describe:e.describe,"only-close":"",onCancel:e.hide},null,8,["title","describe","onCancel"]),j("div",K,[V(e.$slots,"header",{scene:e.scene}),"choose"===e.scene?(w(),O("div",X,[j(l,{modelValue:e.currentPayChannelValue,"onUpdate:modelValue":n[1]||(n[1]=n=>e.currentPayChannelValue=n),"payment-title":e.paymentTitle,"payment-amount":e.paymentAmount,"payment-describe":e.paymentDescribe,"more-button-text":e.moreButtonText,"pay-button-text":e.payButtonText,"pay-button-disabled":e.payButtonDisabled,channels:e.channels,"channel-limit":e.channelLimit,onPay:e.payHandler},null,8,["modelValue","payment-title","payment-amount","payment-describe","more-button-text","pay-button-text","pay-button-disabled","channels","channel-limit","onPay"])])):"captcha"===e.scene?(w(),O("div",Y,[j(c,{ref:"captcha",maxlength:e.sceneOption.captcha.maxlength,count:e.sceneOption.captcha.count,"count-normal-text":e.sceneOption.captcha.countNormalText,"count-active-text":e.sceneOption.captcha.countActiveText,"auto-countdown":e.sceneOption.captcha.autoCountdown,brief:e.sceneOption.captcha.brief,"is-view":"",onSend:e.sceneOption.captcha.onSend,onSubmit:e.sceneOption.captcha.onSubmit},{default:H((()=>[j("div",{textContent:B(e.sceneOption.captcha.text)},null,8,["textContent"])])),_:1},8,["maxlength","count","count-normal-text","count-active-text","auto-countdown","brief","onSend","onSubmit"])])):"loading"===e.scene||"success"===e.scene?(w(),O("div",{key:2,class:["md-cashier-block",{"md-cashier-loading":"loading"===e.scene,"md-cashier-success":"success"===e.scene}]},[j("div",Z,[j(r,{ref:"rolling","is-success":"success"===e.scene},null,8,["is-success"])]),j("div",ee,B("success"===e.scene?e.sceneOption.success.text:e.sceneOption.loading.text),1),"success"===e.scene?(w(),O(d,{key:0,actions:e.sceneOption.success.actions||[{buttonText:e.sceneOption.success.buttonText,handler:e.sceneOption.success.handler}]},null,8,["actions"])):M("",!0)],2)):"fail"===e.scene?(w(),O("div",ne,[j("div",te,[j(u,{name:"warn-color"})]),j("div",{class:"md-cashier-block-text",textContent:B(e.sceneOption.fail.text)},null,8,["textContent"]),j(d,{actions:e.sceneOption.fail.actions||[{buttonText:e.sceneOption.fail.buttonText,handler:e.sceneOption.fail.handler}]},null,8,["actions"])])):"custom"===e.scene?(w(),O("div",ae,[V(e.$slots,"scene")])):M("",!0),V(e.$slots,"footer",{scene:e.scene})])])),_:3},8,["modelValue","onHide","onShow"])},J.install=e=>{e.component(J.name,J)};const oe=P("唤起收银台");var se,ie=T((se=l({},{name:"CashierDemo",title:"基本"}),n(se,t({expose:[],setup(e){const n=v(!1),t=v([{icon:"cashier-icon-1",text:"招商银行(0056)",value:"001"},{icon:"cashier-icon-2",text:"支付宝支付",value:"002"},{icon:"cashier-icon-3",text:"微信支付",value:"003"},{icon:"cashier-icon-4",text:"QQ钱包支付",value:"004"},{icon:"cashier-icon-5",text:"一网通支付",value:"005"}]),a=v(null),o=()=>{console.log(a.value),a.value.next("captcha",{text:"Verification code sent to 156 **** 8965",brief:"The latest verification code is still valid",autoCountdown:!1,countNormalText:"Send Verification code",countActiveText:"Retransmission after {$1}s",onSend:e=>{console.log("[Mand Mobile] Send Captcha"),e()},onSubmit:e=>{console.log(`[Mand Mobile] Send Submit ${e}`),a.value.next("loading"),setTimeout((()=>{a.value.next("success")}),2e3)}})};return(e,s)=>(w(),O(A,null,[j(_(m),{onClick:s[1]||(s[1]=e=>n.value=!n.value)},{default:H((()=>[oe])),_:1}),j(_(J),{ref:a,visible:n.value,"onUpdate:visible":s[2]||(s[2]=e=>n.value=e),class:"md-cashier-demo",channels:t.value,"channel-limit":2,"payment-amount":"100.00","payment-describe":"关于支付金额的特殊说明",onPay:o},null,8,["visible","channels"])],64))}}))));const le={"./demo0.vue":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ie})};var ce=I("Cashier",Object.entries(le).map((e=>e[1].default)));const re={class:"md-nav"},de=j("p",{class:"name"},"Cashier",-1),ue=j("p",{class:"name-zh"},"收银台",-1),pe={class:"md-example cashier"},me={class:"md-example-content"};ce.render=function(e,n,t,a,o,s){const i=k("md-icon");return w(),O(A,null,[j("div",re,[j("p",{class:"home",onClick:n[1]||(n[1]=n=>e.$router.push("/"))},[j(i,{name:"home",size:"lg"})]),de,ue]),j("div",pe,[(w(!0),O(A,null,L(e.demos,((e,n)=>(w(),O("section",{key:n,class:"md-example-section"},[j("div",{class:"md-example-title",textContent:B(e.title)},null,8,["textContent"]),j("div",{class:"md-example-describe",textContent:B(e.describe)},null,8,["textContent"]),j("div",me,[(w(),O(D(e)))])])))),128))])],64)};export default ce;
