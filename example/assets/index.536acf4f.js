var o=Object.defineProperty,n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,a=(n,e,t)=>e in n?o(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;import{t as l}from"./index.0698aebd.js";import{_ as i}from"./animate.8ea3c80e.js";import{c}from"./use-create.265aacc2.js";import{n as s}from"./function.6b03fa63.js";import{_ as r}from"./index.67e874ac.js";import{M as d}from"./index.2a21c8a2.js";import{U as m,H as p,S as u}from"./constants.3b37bb64.js";import{k as g,d as f,r as v,o as y,c as b,w as S,f as h,n as w,l as x,t as k,F as H,h as j,Q as _,g as C}from"./vendor.cf144a98.js";const V={modelValue:{type:Boolean,default:!1},title:{type:String,default:""},icon:{type:String,default:""},iconSvg:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},content:{type:String,default:""},actions:{type:Array,default:()=>[]},layout:{type:String,default:"row"},appendTo:{type:[Object,String],default:()=>globalThis.document.body},hasMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!1},transition:{type:String,default:"md-fade"},preventScroll:{type:Boolean,default:!1},preventScrollExclude:{type:[Object],default:void 0}};var M=f({name:"MdDialog",components:{MdPopup:r,MdIcon:i,MdActivityIndicatorRolling:d},props:V,emits:[m,p,u],setup:(o,l)=>((o,l)=>{for(var i in l||(l={}))e.call(l,i)&&a(o,i,l[i]);if(n)for(var i of n(l))t.call(l,i)&&a(o,i,l[i]);return o})({},((o,{emit:n})=>{const e=g({get:()=>o.modelValue,set:()=>n(m,!1)}),t=()=>{n(m,!1)};return{dialogShow:e,close:t,onHide:()=>{n(p)},onShow:()=>{n(u)},actionHandler:o=>{o.disabled||o.loading||("function"==typeof o.handler?o.handler.call(null,o):t())}}})(o,l))});const P={class:"md-dialog-content"},O={class:"md-dialog-body"},T={key:1,class:"md-dialog-icon"};M.render=function(o,n,e,t,a,l){const i=v("md-icon"),c=v("md-activity-indicator-rolling"),s=v("md-popup");return y(),b(s,{modelValue:o.dialogShow,"onUpdate:modelValue":n[3]||(n[3]=n=>o.dialogShow=n),class:"md-dialog","has-mask":o.hasMask,"mask-closable":o.maskClosable,transition:o.transition,"prevent-scroll":o.preventScroll,"prevent-scroll-exclude":o.preventScrollExclude,position:"center",onShow:o.onShow,onHide:o.onHide},{default:S((()=>[h("div",P,[w(o.$slots,"header"),h("div",O,[o.closable?(y(),b("a",{key:0,role:"button",class:"md-dialog-close",onClick:n[1]||(n[1]=(...n)=>o.close&&o.close(...n))},[h(i,{name:"close"})])):x("",!0),o.icon?(y(),b("div",T,[h(i,{name:o.icon,svg:o.iconSvg},null,8,["name","svg"])])):x("",!0),o.title?(y(),b("div",{key:2,class:"md-dialog-title",textContent:k(o.title)},null,8,["textContent"])):x("",!0),w(o.$slots,"default",{},(()=>[h("div",{class:"md-dialog-text",innerHTML:o.content},null,8,["innerHTML"])]))]),o.actions.length>0?(y(),b("div",{key:0,class:["md-dialog-actions",{"is-column":"column"===o.layout}]},[(y(!0),b(H,null,j(o.actions,((e,t)=>(y(),b("a",{key:t,role:"button",class:["md-dialog-btn",{disabled:!!e.disabled,warning:!e.disabled&&!!e.warning}],onTouchmove:n[2]||(n[2]=_((()=>{}),["prevent"])),onClick:n=>o.actionHandler(e)},[e.loading?(y(),b(c,{key:0,class:"md-dialog-btn-loading"})):e.icon?(y(),b(i,{key:1,class:"md-dialog-btn-icon",name:e.icon,svg:e.iconSvg,size:"md"},null,8,["name","svg"])):x("",!0),C(" "+k(e.text),1)],42,["onClick"])))),128))],2)):x("",!0)])])),_:3},8,["modelValue","has-mask","mask-closable","transition","prevent-scroll","prevent-scroll-exclude","onShow","onHide"])};M.create=function({title:o="",icon:n="",iconSvg:e=!1,content:t="",closable:a=!1,transition:l="md-bounce",actions:i=[],onShow:r=s,onHide:d=s,onClose:m=s}){var p,u,g,f;const v={title:o,icon:n,iconSvg:e,content:t,closable:a,actions:i,transition:l,preventScroll:!0,onShow:r,onHide:d,"onUpdate:modelValue":m};if(M._show=()=>{M._instance.component.proxy.updateProps({modelValue:!0})},M._instance)return M._instance.component.proxy.updateProps(v),null==(p=M._show)||p.call(M),M._instance.component.proxy;const y=M._instance=c(M,v);if(null==(u=M._show)||u.call(M),null==(g=null==y?void 0:y.component)?void 0:g.proxy){const o=y.component.proxy.remove;y.component.proxy.remove=(...n)=>{var e;null==o||o.apply(null==(e=y.component)?void 0:e.proxy,n),M._instance=null}}return null==(f=null==y?void 0:y.component)?void 0:f.proxy},M.confirm=({title:o="",icon:n="",iconSvg:e=!1,content:t="",cancelText:a=l("md.dialog.cancel"),cancelWarning:i=!1,confirmText:c=l("md.dialog.confirm"),confirmWarning:r=!1,closable:d=!1,transition:m="md-bounce",onConfirm:p=s,onCancel:u=s,onShow:g=s,onHide:f=s})=>{const v=M.create({title:o,icon:n,iconSvg:e,content:t,closable:d,transition:m,onShow:g,onHide:f,actions:[{text:a,warning:i,handler:()=>{u(),v.updateProps({modelValue:!1})}},{text:c,warning:r,handler:()=>{p(),v.updateProps({modelValue:!1})}}]});return v},M.alert=({title:o="",icon:n="",iconSvg:e=!1,content:t="",confirmText:a=l("md.dialog.confirm"),closable:i=!1,warning:c=!1,transition:r="md-bounce",onConfirm:d=s,onShow:m=s,onHide:p=s})=>{const u=M.create({title:o,icon:n,iconSvg:e,content:t,closable:i,transition:r,onShow:m,onHide:p,actions:[{text:a,warning:c,handler:()=>{d(),u.updateProps({modelValue:!1})}}]});return u},M.succeed=o=>(o.icon="success-color",M.confirm(o)),M.failed=o=>(o.icon="warn-color",B.confirm(o));const B=M;B.install=o=>{o.component(B.name,B)};export{B as D};
