import"./animate.d048e3d3.js";import{g as e}from"./function.da7d2fdb.js";import{m as a,k as t,j as r,d as n,o as l,c as s,f as i,n as o,F as c,h as u,l as m}from"./vendor.cf144a98.js";const f={content:{type:String,default:""},spacing:{type:[String,Number],default:"20vw"},repeatX:{type:Boolean,default:!0},repeatY:{type:Boolean,default:!0},rotate:{type:[String,Number],default:-30},opacity:{type:[String,Number],default:.1}},v=n=>{const l=a(null),s=a(null),i=t((()=>s.value?s.value.getContext("2d"):null));let o=0,c=0,u=2,m=0;return r((()=>{u=Math.max(e(),2),(()=>{var e;if(l.value&&s.value){const{clientHeight:a,clientWidth:t}=l.value;o=s.value.height=a*u,c=s.value.width=t*u,null==(e=i.value)||e.scale(1/u,1/u)}})(),(()=>{var e;const{spacing:a}=n;if("number"==typeof a)return void(m=a);const[,t=20,r="vw"]=null!=(e=/([0-9]+)([A-Za-z]+)/.exec(a))?e:[,20,"vw"];if("px"===r)m=Number(t);else if("vh"===r){const e=window.screen.height;m=Number(t)*e/100}else if("vw"===r){const e=window.screen.width;m=Number(t)*e/100}m*=u})(),(()=>{const{content:e}=n,a=14*u,t=e.length*a,r=Math.ceil(c*u/(t+m)),l=Math.ceil(o*u/(a+m));if(i.value){i.value.font=`${a}px "Helvetica Neue",Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","微软雅黑",Arial,sans-serif`,i.value.fillStyle="#858B9C";let n=0,s=0;for(let o=0;o<l;o++){n=0;for(let a=0;a<r;a++)i.value.fillText(e,n,s),n+=t;s+=a+m}}})()})),{markRef:l,canvasRef:s}};var p=n({name:"MdWaterMark",props:f,setup(e){const{markRef:a,canvasRef:t}=v(e);return{mark:a,canvas:t}}});const d={class:"md-water-mark"},g={class:"water-mark-container"},w={key:0,ref:"mark",class:"water-mark-list"},k={key:0,ref:"canvas",class:"water-mark-canvas"};p.render=function(e,a,t,r,n,f){return l(),s("div",d,[i("div",g,[o(e.$slots,"default")]),e.$slots.watermark||e.content?(l(),s("div",w,[i("div",{class:"water-mark-list-wrapper",style:{opacity:e.opacity,transform:`rotate(${e.rotate}deg)`}},[e.content?(l(),s("canvas",k,null,512)):e.$slots.watermark?(l(!0),s(c,{key:1},u(e.repeatY?50:1,(a=>(l(),s("ul",{key:`line-${a}`,class:"water-mark-line",style:{marginBottom:e.spacing}},[(l(!0),s(c,null,u(e.repeatX?50:1,(t=>(l(),s("li",{key:`item-${t}`,class:"water-mark-item",style:a%2==0?{marginLeft:e.repeatX?e.spacing:0}:{marginRight:e.repeatX?e.spacing:0}},[o(e.$slots,"watermark",{coord:{row:a,col:t}})],4)))),128))],4)))),128)):m("",!0)],4)],512)):m("",!0)])},p.install=e=>{e.component(p.name,p)};export{p as _};
